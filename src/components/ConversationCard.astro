---
import { processConversation } from '../utils/contentProcessor.js';

export interface Props {
  conversation: {
    frontmatter: {
      date: string;
      time: string;
      title: string;
      tags: string[];
    };
    Content: any;
    rawContent: () => string;
  };
}

const { conversation } = Astro.props;
const { frontmatter, Content, rawContent } = conversation;

// Process the conversation to extract metadata
const processed = processConversation(rawContent());
---

<conversation-card
  title={frontmatter.title}
  preview={processed.preview}
  time={frontmatter.time}
  exchange-count={processed.exchangeCount.toString()}
>
  <div class="tags">
    {frontmatter.tags.map((tag: string) => (
      <span class="tag">#{tag}</span>
    ))}
  </div>
  
  <div class="content">
    <Content />
  </div>
</conversation-card>

<style>
  .tags {
    margin: 10px 0;
  }
  
  .tag {
    color: var(--term-gray);
    font-size: 12px;
    margin-right: 10px;
  }
  
  .content {
    margin: 15px 0;
  }
  
  .content h2 {
    color: var(--term-amber);
    font-size: 16px;
    margin: 15px 0 5px 0;
  }
  
  .content pre {
    overflow-x: auto;
  }
</style>