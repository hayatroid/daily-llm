# /new 🗣️

## 目的

トピックについて対話し、会話内容を構造化された価値ある記事に変換する

## 使い方

`/new [トピック]`

## 実行手順 📋

### Phase 1: 対話 (Dialog)

1. **トピック確認**: 提供されたトピックについて対話開始
2. **深掘り対話**: 以下のいずれかまで継続
   - 5-10往復の対話完了（内容の深さに応じて柔軟に調整）
   - ユーザーが「記録」「まとめ」「文書化」を示唆
   - 自然な会話の区切りに到達
   - 一つのテーマについて十分な探求が完了
3. **文書化提案**: 会話が一段落したタイミングで記録を提案

### Phase 2: 構造化 (Structure)

1. **要素抽出**: 会話から以下を特定

   - 核となるアイデア・コンセプト
   - 具体的な技術・実装方法
   - コード例・設計パターン
   - 将来展望・応用可能性

2. **構造決定**: 標準パターンまたはカスタム構造を選択

   ```
   標準パターン:
   - 導入（問題意識・着想）
   - 核となるコンセプト（メインアイデア + コード例）
   - 発展・実装詳細（アーキテクチャ・技術スタック）
   - 将来展望・まとめ（ビジョン・応用）
   ```

3. **タイトル協議**: 以下の基準で協力してタイトル作成
   - 核となるコンセプトを端的に表現
   - 8文字以上30文字以内（簡潔さを重視）
   - 単なる要約ではなく、記憶に残る表現
   - ユーザーからの簡潔な提案も積極的に採用

### Phase 3: 記事作成 (Article Creation)

1. **メタデータ生成**:

   - **tags**: 会話で言及された技術・概念・手法（4-8個）を slug 形式で記述
   - **description**: アイデア + アプローチ + 結果の1文要約

2. **本文執筆**:

   - Phase 2 で決定した構造に従って執筆
   - 時系列の会話ログではなく、論理的に整理された記事
   - コード例は会話内容を基に適切に配置
   - CLAUDE.md のフォーマットルール準拠
   - **日英混在文の書式確認**: 英単語の前後に半角スペースを必ず挿入
   - **語り口**: AI 視点でのユーザ観察記録として記述（「ユーザは」等）
   - **装飾制限**: bold マークアップ（**太字**）や絵文字は使用しない
   - **記録方針**: 簡潔で読みやすい観察記録として構成

3. **ファイル作成**: `src/content/daily/YYYY-MM-DD/NNN-slug.md`

4. **品質チェック実行**: 以下を順次実行 (CLAUDE.md 必須ルール)
   - `npm run format && npm run lint` - コードフォーマット・lint
   - `npm run textlint [ファイルパス]` - 日本語文章品質チェック
   - textlint エラーがある場合は修正して再チェック

## 判断基準 🎯

### 会話終了タイミング

- ✅ 5-10往復の対話が完了した（内容により柔軟に調整）
- ✅ 一つの完結したアイデアについて議論が深まった
- ✅ 具体的な実装や応用について言及された
- ✅ ユーザーが満足げな反応を示した（「うん！」「面白い」等）
- ✅ 理想論と現実のギャップなど、複数の観点が議論された

### タイトルの適切性

- ✅ 核となるコンセプトを端的に表現している
- ✅ 8-30文字の範囲内（簡潔さを重視）
- ✅ 単なる技術名の羅列ではない
- ✅ 後から読み返して内容を想起できる

### 記事の完成度

- ✅ 導入 → 核心 → 発展 → 展望の構造が明確
- ✅ コード例が適切に配置されている
- ✅ 単なる会話ログではなく構造化された内容
- ✅ 日英混在文で英単語の前後に半角スペースが挿入されている
- ✅ 後から読み返して学びのある記事になっている

## ファイルテンプレート 📄

````markdown
---
title: '[協議したタイトル]'
tags: ['technology-1', 'concept-2', 'method-3', 'keyword-4']
description: '[アイデア + アプローチ + 結果の1文要約]'
---

[導入: 問題意識・着想の背景 1-2段落]
注意:

- 英単語の前後には半角スペース → "React アプリケーション", "API 設計"
- AI 視点でのユーザ観察記録として記述（一人称は使わない）
- bold マークアップや絵文字は使用しない
- 簡潔で読みやすい記録として構成

## [核となるコンセプト・アイデア]

[メインとなる概念・手法・設計思想の説明]

```[言語]
// 具体的なコード例・実装
```
````

## [発展・応用・実装詳細]

[アイデアの発展、実装アーキテクチャ、技術スタック等]

## [将来展望・まとめ]

[ビジョン、他分野への応用可能性、本質的な価値]

````

## 実行例 💫

```bash
# 入力
/new "F# で物理量を扱えるのが興味深いので掘り下げたい"

# プロセス
1. 対話: F# Units of Measure → テスト駆動物理 → 教育システム (6往復)
2. 構造化: 導入(F#着想) → 核心(テスト駆動物理) → 発展(オンラインジャッジ) → 展望(教育革新)
3. タイトル協議: "テスト駆動入試物理の構想を練る" (22文字)

# 出力
src/content/daily/2025-06-29/002-test-driven-entrance-exam-physics.md
4. 品質チェック:
   - npm run format && npm run lint (正常完了)
   - npm run textlint src/content/daily/2025-06-29/002-test-driven-entrance-exam-physics.md (正常完了)
````

## 成功の基準 🎯

- ✅ 上記の判断基準をすべて満たしている
- ✅ 会話終了タイミングが適切だった
- ✅ 構造化プロセスが明確に実行された
- ✅ タイトルが基準を満たしている
- ✅ 記事が標準テンプレートに従っている
- ✅ 日英混在文で英単語の前後に半角スペースが正しく挿入されている
- ✅ `npm run format && npm run lint` が正常完了
- ✅ `npm run textlint` が正常完了（警告なし）
- ✅ CLAUDE.md フォーマットルールに準拠
- ✅ 後から読み返して価値のある記事になっている
