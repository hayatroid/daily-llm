# /summarize 📊

## 目的

特定日の全会話を分析して日次サマリー（index.md）を生成・更新する

## 使い方

`/summarize [日付]`

## 実行の流れ ✨

1. **対象日付の決定**

   - 日付指定ありの場合：YYYY-MM-DD 形式を使用
   - 日付指定なしの場合：今日の日付を使用
   - 日付形式とディレクトリの存在を確認

2. **全会話ファイルの読み込み**

   - `src/content/daily/YYYY-MM-DD/` の `NNN-*.md` ファイルをスキャン
   - frontmatter（title, tags, description）を解析
   - 会話内容を抽出

3. **内容分析とサマリー生成**

   - 会話全体の主要トピックとテーマを特定
   - 重要な洞察と学習内容を抽出
   - 全会話のタグを統合
   - 会話をつなぐ一貫したナラティブを作成

4. **サマリー内容の生成**

   - その日のテーマを反映した魅力的なタイトル作成
   - 日英混在で 2-3 段落のサマリー執筆
   - 「重要なポイント」セクションを箇条書きで追加
   - 統合されたタグリストを含める

5. **index.md の作成・更新**
   - 下記のサマリーテンプレートを使用
   - `src/content/daily/YYYY-MM-DD/index.md` に書き込み
   - CLAUDE.md フォーマットルールに従う

## サマリーテンプレート 📄

```markdown
---
title: '[生成されたサマリータイトル]'
tags: ['[統合された]', '[全会話からの]', '[タグ]', '[リスト]']
description: '[その日の議論と主要トピックの概要]'
---

[その日の会話、重要なテーマ、全体的なナラティブを説明する 2-3 段落のサマリー。CLAUDE.md ルールに従って日英を自然に混在させる。]

## 重要なポイント

- [会話からの重要な洞察 1]
- [会話からの重要な洞察 2]
- [会話からの重要な洞察 3]
- [実践的な応用や次のステップ]

[学習の応用準備についてのオプション締めくくり文]
```

## 分析ガイドライン 🔍

### 内容分析

- 会話全体の共通テーマを特定
- 実践的な洞察と実行可能な学習内容を抽出
- 技術概念とその応用を記録
- 議論された問題解決アプローチをハイライト

### タグ統合

- 会話ファイルから全ユニークタグをマージ
- 重複を削除し、タグ名を正規化
- 最も関連性の高いタグを優先（4-6個に制限）

### 書き方スタイル

- CLAUDE.md の混合言語ルールに従う（英単語周りに半角スペース）
- サマリーを魅力的でナラティブ駆動に保つ
- 「何を」だけでなく「なぜ」と洞察に焦点
- 将来を見据えた文章を含める

## 必要な情報 📋

- **日付** (オプション): YYYY-MM-DD 形式の対象日付（デフォルトは今日）

## 実行例 💫

```bash
# 今日のサマリーを生成
/summarize

# 特定日のサマリーを生成
/summarize 2025-06-29

# 結果: src/content/daily/2025-06-29/index.md 作成・更新
```

## エラーハンドリング 🛡️

- 日付ディレクトリが存在しない場合、利用可能な日付とエラーを表示
- 会話ファイルが見つからない場合、最小限のサマリーテンプレートを作成
- index.md が存在する場合、上書き確認をプロンプト
- 全会話ファイルが適切な frontmatter を持つことを確認

## 成功の基準 🎯

- ✅ その日の全会話を反映した包括的サマリー
- ✅ 統合されたメタデータでの適切な frontmatter
- ✅ 異なるトピックをつなぐ魅力的なナラティブ
- ✅ 重要なポイントの明確な抽出・提示
- ✅ 全 CLAUDE.md フォーマット・言語ルールに準拠
